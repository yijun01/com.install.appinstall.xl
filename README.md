# com.install.appinstall.xl
伪造应用安装 XP 模块
# 应用安装状态伪造 XP 模块
一款功能全面的 Xposed 模块，可伪造应用安装状态，解决应用因检测特定包而限制功能或强制退出的问题。

## 核心功能
### ✨ 核心能力
1. **双模式安装状态伪造**：支持切换“已安装”/“未安装”模式，自动捕获目标应用的包检测请求并返回伪造结果。
2. **检测场景退出拦截**：拦截常见退出方式及间接退出，支持静默拦截/手动确认。
3. **自动权限伪造**：无需手动授权，自动伪造 QUERY_ALL_PACKAGES等检测相关权限。
4. **多场景检测适配**：
   - 拦截 PackageManager 查询、文件系统检测、命令行检测（pm/dumpsys 等）
   - 适配场景应用插件检测
   - 拦截网络检测：适配网络请求检测场景（不影响网络）

### 🎨 便捷操作
- 悬浮窗快捷配置：点击切换安装状态，长按隐藏/清理包列表
- 历史记录记忆：重复检测场景自动静默拦截，无需重复确认
- 配置自动保存：悬浮窗位置、拦截状态等配置自动持久化，重启不丢失

## 前置条件
1. 设备已 root，安装 **LSPosed 框架**（推荐）或 EdXposed 框架
2. 设备未 root，安装 **LSPatch 框架**
3. 系统版本：Android 8.0+（API 26+），兼容至 Android 16（API 36）
4. 目标应用未加固（加固应用可能导致模块失效）

## 安装教程
### 1. 模块安装（LSPosed）
1. 下载最新版本 APK：[Releases 页面]
2. 安装 APK 后，打开 LSPosed → 模块 → 找到“伪造安装”模块 → 启用模块。
3. 勾选需要适配的目标应用（仅勾选需要的应用，请勿勾选系统相关应用）。
4. 重启目标应用（或重启设备），模块生效。
### 2. 模块安装（LSPatch）
1.打开 LSPatch →添加应用 → 选择内嵌或本地模式 → 找到“伪造安装”模块 → 勾选并制作新安装包。
2.安装制作的新应用，启动后模块自动生效。
（制作前请确认该应用无加固无签名校验等限制）

### 2. 功能使用
#### 🔧 悬浮窗操作
| 操作方式（目标宿主应用）| 功能效果                                                         |
|----------------|---------------------------------------------------------------------------|
| 点击悬浮窗     | 弹出配置面板：切换“已安装/未安装”状态、开启/关闭退出拦截                       |
| 长按悬浮窗     | 弹出菜单：隐藏悬浮窗（重启应用恢复）、清理已捕获的包列表、重置配置              |
| 拖拽悬浮窗     | 调整悬浮窗位置，自动保存位置配置                                             |

#### 📌 核心功能使用
- **伪造安装状态**：点击悬浮窗选择“切换为已安装”/“切换为未安装”，重启应用或切换页面刷新生效
- **拦截退出功能**：在配置面板开启“拦截退出”，应用因检测到伪造包退出时会自动拦截（支持静默拦截）
- **清理检测记录**：长按悬浮窗选择“清理包列表”，可清空已捕获的检测包记录及伪造缓存

## 注意事项
1. ❌ 禁止对系统应用启用模块，可能导致系统崩溃
2. 📱 若目标应用无响应，可尝试：清理包列表 → 刷新应用 → 重启设备
3. 📁 模块配置文件路径：`/data/data/目标应用包名/files/install_fake_config.json`，卸载应用或彻底清理应用数据后自动删除
4. ⚠️ 部分加固应用可能屏蔽 Xposed 模块，导致功能失效
5. ⚠️ 部分应用可能无法使用模块导致功能失效
6. ⚠️ 部分应用可能采用其他技术检测，导致功能失效

## 常见问题
### Q：模块启用后无悬浮窗？
A：1. 确认目标应用已重启；2. 检查是否误隐藏悬浮窗（重启应用恢复）；3. 确认模块已勾选目标应用

### Q：应用仍提示“未安装指定应用”？
A：1. 切换“已安装”模式并重启应用；2. 清理包列表后重新打开目标应用；3. 检查目标应用是否加固

### Q：拦截退出功能无效？
A：1. 在悬浮窗配置面板确认“拦截退出”已开启；2. 部分应用退出方式特殊，可反馈应用包名优化适配

### Q：悬浮窗无法点击或覆盖
A：1. 悬浮窗功能已尽可能在宿主应用中提高层级，但仍然可能会被覆盖，如应用的对话框弹窗。

## 免责声明
本模块仅用于学习和研究，请勿用于商业或非法用途，使用过程中若出现设备故障、应用异常等问题，作者不承担任何责任。
